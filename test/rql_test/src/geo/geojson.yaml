desc: Test geoJSON conversion
tests:
  # Basic conversion
  - cd: r.geojson({'coordinates':[0,0], 'type':'Point'})
    ot: ({'$reql_type$':'GEOMETRY', 'coordinates':{'long':0, 'lat':0}, 'type':'Point'})
  - cd: r.geojson({'coordinates':[[0,0], [0,1]], 'type':'LineString'})
    ot: ({'$reql_type$':'GEOMETRY', 'coordinates':[{'long':0, 'lat':0}, {'long':0, 'lat':1}], 'type':'LineString'})
  - cd: r.geojson({'coordinates':[[[0,0], [0,1], [1,0], [0,0]]], 'type':'Polygon'})
    ot: ({'$reql_type$':'GEOMETRY', 'coordinates':[[{'long':0, 'lat':0}, {'long':0, 'lat':1}, {'long':1, 'lat':0}, {'long':0, 'lat':0}]], 'type':'Polygon'})

  # Wrong / missing fields
  - cd: r.geojson({'coordinates':[[], 0], 'type':'Point'})
    ot: err('RqlRuntimeError', 'Expected type OBJECT but found ARRAY.', [0])
  - cd: r.geojson({'coordinates':true, 'type':'Point'})
    ot: err('RqlRuntimeError', 'Expected geometry object `coordinates` to be an OBJECT or ARRAY but found BOOL.', [0])
  - cd: r.geojson({'type':'Point'})
    ot: err('RqlRuntimeError', 'Field `coordinates` not found in geometry object.', [0])
  - cd: r.geojson({'coordinates':[0, 0]})
    ot: err('RqlRuntimeError', 'Field `type` not found in geometry object.', [0])
  - cd: r.geojson({'coordinates':[0, 0], 'type':'foo'})
    ot: err('RqlRuntimeError', 'Unrecognized GeoJSON type `foo`.', [0])
  - cd: r.geojson({'coordinates':[0, 0], 'type':'Point', 'foo':'wrong'})
    ot: err('RqlRuntimeError', 'Unrecognized field `foo` found in geometry object.', [0])

  # Unsupported features
  - cd: r.geojson({'coordinates':[0, 0], 'type':'Point', 'crs':null})
    ot: ({'$reql_type$':'GEOMETRY', 'coordinates':{'long':0, 'lat':0}, 'type':'Point', 'crs':null})
  - js: r.geojson({'coordinates':[0, 0], 'type':'Point', 'crs':{'type':'name', 'properties':{'name':'test'}}})
    ot: err('RqlRuntimeError', 'Non-default coordinate reference systems are not supported in GeoJSON objects.  Make sure the `crs` field of the geometry is null or non-existent.', [0])
  - cd: r.geojson({'coordinates':[0, 0], 'type':'MultiPoint'})
    ot: err('RqlRuntimeError', 'GeoJSON type `MultiPoint` is not supported.', [0])
